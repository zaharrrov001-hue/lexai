# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Workflow

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

Workflow –ø–∞–¥–∞–ª –Ω–∞ —à–∞–≥–µ `process-legal-query` –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —à–∞–≥–∞–º–∏.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–í Mastra workflows, –∫–æ–≥–¥–∞ —à–∞–≥–∏ —Å–≤—è–∑–∞–Ω—ã —á–µ—Ä–µ–∑ `.then()`, **–∫–∞–∂–¥—ã–π —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥ –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ output –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —à–∞–≥–∞**. –ü–æ—ç—Ç–æ–º—É –∫–∞–∂–¥—ã–π —à–∞–≥ –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–∞–ª—å—à–µ.

### –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

1. **`searchStep`** —Ç–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞–µ—Ç:
   - `question` (–¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö —à–∞–≥–æ–≤)
   - `documents` (–¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —à–∞–≥–∞)
   - `jurisdiction` (–¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö —à–∞–≥–æ–≤)
   - `searchResults` (—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞)

2. **`analyzeDocumentsStep`** —Ç–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞–µ—Ç:
   - –í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —à–∞–≥–∞
   - `documentAnalysis` (—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤)

3. **`processLegalQueryStep`** —Ç–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞–µ—Ç:
   - –í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —à–∞–≥–æ–≤
   - `legalAnswer` (—Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞)

4. **`formatResponseStep`** –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç

## üìã –ü—Ä–∞–≤–∏–ª–æ Mastra Workflows:

> **Each step's `outputSchema` must match the next step's `inputSchema`**

–ï—Å–ª–∏ —à–∞–≥—É –Ω—É–∂–Ω—ã –¥–∞–Ω–Ω—ã–µ –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —à–∞–≥–æ–≤, –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω—ã –≤ `outputSchema` –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —à–∞–≥–∞.

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å workflow –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
- ‚úÖ –í—Å–µ —à–∞–≥–∏ –ø–æ–ª—É—á–∞—é—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –î–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
- ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π —à–∞–≥ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç

## üöÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ Mastra Cloud:
1. –û—Ç–∫—Ä–æ–π—Ç–µ Studio
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ workflow —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
3. –í—Å–µ 4 —à–∞–≥–∞ –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è —É—Å–ø–µ—à–Ω–æ

